"use strict";(self.webpackChunkmobrix_engine_playground=self.webpackChunkmobrix_engine_playground||[]).push([[151],{7151:function(e,r,n){n.r(r),n.d(r,{initEngine:function(){return f}});var c=n(4397),i=n(9731),t=n(7241),o=n(6749),a=function(){return a=Object.assign||function(e){for(var r,n=1,c=arguments.length;n<c;n++)for(var i in r=arguments[n])Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i]);return e},a.apply(this,arguments)},f=function(e){var r=function(e){var r=e||{},n=r.core||{},c=n.customize||{};return a(a({},e),{core:{designerInteractions:n.designerInteractions||[],legacyMiddlewares:n.legacyMiddlewares||[],middlewares:n.middlewares||[],customize:a(a({},c),{config:c.config||{}}),reducers:n.reducers||{},preload:n.preload||{}},plugins:r.plugins||[]})}(e),n=function(e){var r=a({},e),n={},t=[],o=[],f=[],u=[],s=[],l=[],d=[],g={},p=function(e){return function(r){var n=r.config,c=r.store;return e({config:n,store:c})||n}};return r.plugins.forEach((function(c){try{if(c.feature){n[c.feature]={};var i=c();if(i.field){var a=i.field(e)||{name:null,content:{}};n[c.feature]=a.content,a.name&&"config"!==a.name&&(r[a.name]=a.content,g[c.feature]=a.name)}i.interactions&&(t=t.concat(i.interactions)),i.designerInteractions&&(o=o.concat(i.designerInteractions)),i.middlewares&&(f=f.concat(i.middlewares)),i.reducer&&s.push(i.reducer),i.format&&u.push(i.format),i.before&&d.push(p(i.before)),i.after&&l.push(p(i.after))}}catch(c){}})),u.forEach((function(e){r=e(r)})),t.forEach((function(e){if(n[e.plugin]){var c=e.effect(n[e.plugin],r);n[e.plugin]=c,g[e.plugin]&&(r[g[e.plugin]]=c)}})),r.core.designerInteractions=r.core.designerInteractions.concat(o),{before:function(e){var n=a({},e);return f.forEach((function(e){var r,c,i=e(n);i.legacyMiddlewares&&(r=n.core.legacyMiddlewares).push.apply(r,i.legacyMiddlewares),i.middlewares&&(c=n.core.middlewares).push.apply(c,i.middlewares)})),d.forEach((function(e){n=e({config:n})})),s.forEach((function(e){var t=e(n);if(t.slice&&"config"!==t.slice){r.core.customize[t.slice]=(0,i.e)({toFill:r.core.customize[t.slice],defaultObj:{state:{},effects:{}}});var o=t.initialState||{},f=r.core.preload[t.slice]||{};r.core.preload[t.slice]=a(a(a({},o),f),n.core.customize[t.slice].state);var u=n.core.customize[t.slice].effects;t.effects&&(u=a(a({},u),t.effects)),n.core.reducers[t.slice]=(0,c.UM)({initialState:r.core.preload[t.slice],effects:u,additionalReducer:t.reducer})}})),n},after:function(e,r){var n=a({},e);return l.forEach((function(e){n=e({config:n,store:r})})),n},config:r}}(r);r=n.config;var f=function(e){var r=e.core,n=r.legacyMiddlewares;r.middlewares.forEach((function(e){n.push((function(r){return function(n){return function(c){return e(c,r),n(c)}}}))}));var i=(r.customize||{config:{}}).config||{},f=a({config:a({appName:e.appName||""},i)},e.core.preload),u=a({config:function(e){return void 0===e&&(e=f.config),e}},e.core.reducers),s=(0,t.xC)({reducer:(0,o.UY)(u),preloadedState:f,middleware:n,devTools:!1});return s.dispatch((0,c.k$)(f.config)),s}(r=n.before(r));return{store:f,config:r=n.after(r,f)}}}}]);